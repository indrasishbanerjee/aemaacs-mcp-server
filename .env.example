# AEMaaCS MCP Servers Configuration
# Copy this file to .env and configure your settings

# ===========================================
# AEM Connection Configuration
# ===========================================

# AEMaaCS Instance URL
AEM_HOST=https://your-instance.adobeaemcloud.com

# Service Account Authentication (Recommended)
AEM_CLIENT_ID=your-client-id
AEM_CLIENT_SECRET=your-client-secret
AEM_TECHNICAL_ACCOUNT_ID=your-technical-account-id@techacct.adobe.com
AEM_ORGANIZATION_ID=your-organization-id@AdobeOrg
AEM_PRIVATE_KEY=your-private-key-content

# Alternative: Basic Authentication (Less Secure)
# AEM_USERNAME=your-username
# AEM_PASSWORD=your-password

# ===========================================
# Server Configuration
# ===========================================

# Server Ports
READ_SERVER_PORT=3001
WRITE_SERVER_PORT=3002

# Environment
NODE_ENV=development

# Logging
LOG_LEVEL=info
DEBUG=aem-mcp-server:*

# ===========================================
# Security Configuration (Write Server)
# ===========================================

# API Key for Write Server (REQUIRED for write operations)
API_KEY=your-secure-api-key-here

# IP Allowlist (comma-separated)
ALLOWED_IPS=127.0.0.1,::1,192.168.1.0/24

# Enable audit logging
ENABLE_AUDIT_LOG=true

# ===========================================
# Rate Limiting
# ===========================================

# Read Server Rate Limits
READ_RATE_LIMIT_REQUESTS=100
READ_RATE_LIMIT_WINDOW=60000

# Write Server Rate Limits (more restrictive)
WRITE_RATE_LIMIT_REQUESTS=50
WRITE_RATE_LIMIT_WINDOW=60000

# ===========================================
# Caching Configuration
# ===========================================

# Redis Configuration (optional)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# Cache TTL (seconds)
CACHE_TTL=300

# ===========================================
# Monitoring Configuration
# ===========================================

# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9464

# Health check configuration
HEALTH_CHECK_INTERVAL=30000

# ===========================================
# SSL/TLS Configuration (Production)
# ===========================================

# Domain for SSL certificates
DOMAIN=your-domain.com

# Let's Encrypt email
ACME_EMAIL=admin@your-domain.com

# ===========================================
# Monitoring Stack Configuration
# ===========================================

# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=your-secure-grafana-password

# AlertManager
ALERT_EMAIL=alerts@your-domain.com
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# ===========================================
# Database Configuration (Optional)
# ===========================================

# PostgreSQL for audit logs (optional)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=aem_mcp_audit
POSTGRES_USER=aem_user
POSTGRES_PASSWORD=your-postgres-password

# ===========================================
# Development Configuration
# ===========================================

# Enable development features
DEV_MODE=false

# Mock AEM responses (for testing)
MOCK_AEM=false

# Disable SSL verification (development only)
NODE_TLS_REJECT_UNAUTHORIZED=1

# ===========================================
# Backup Configuration
# ===========================================

# Backup directory
BACKUP_DIR=./backups

# Backup retention (days)
BACKUP_RETENTION=30

# ===========================================
# Performance Tuning
# ===========================================

# Node.js memory limit
NODE_OPTIONS=--max-old-space-size=2048

# Connection pool settings
AEM_CONNECTION_POOL_SIZE=10
AEM_CONNECTION_TIMEOUT=30000

# Request timeout
REQUEST_TIMEOUT=60000

# ===========================================
# Feature Flags
# ===========================================

# Enable experimental features
ENABLE_EXPERIMENTAL_FEATURES=false

# Enable GraphQL endpoint
ENABLE_GRAPHQL=false

# Enable WebSocket support
ENABLE_WEBSOCKET=false